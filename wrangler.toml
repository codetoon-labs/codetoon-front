name = "codetoon"
main = ".open-next/worker.js"
compatibility_date = "2026-01-10"
compatibility_flags = ["nodejs_compat"]

# Static assets configuration for OpenNext.js
[assets]
directory = ".open-next/assets"
binding = "ASSETS"

# R2 bucket for incremental cache
[[r2_buckets]]
binding = "NEXT_INC_CACHE_R2_BUCKET"
bucket_name = "codetoon-cache"

# Environment variables (default)
[vars]
NODE_ENV = "production"

# Production environment
[env.production]
[env.production.vars]
NODE_ENV = "production"

# Production routes (explicitly defined for production env)
[[env.production.routes]]
pattern = "codetoon.net"
custom_domain = true

[[env.production.routes]]
pattern = "www.codetoon.net"
custom_domain = true

# Development configuration
[env.development]
[env.development.vars]
NODE_ENV = "development"